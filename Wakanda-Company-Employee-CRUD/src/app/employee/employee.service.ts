import { Injectable } from '@angular/core';import { Wakanda } from './../wakanda.service';@Injectable()export class EmployeeService {  employeesCollection: any;  pageSize: number = 5000;  constructor(private wakanda: Wakanda) {  }    getEmployees(page): Promise<any> {    return new Promise((resolve, reject) => {      if(this.employeesCollection) {        let start = ((page - 1) * this.pageSize) - this.pageSize; //get to the right start        this.employeesCollection._first = start;        this.employeesCollection.nextPage().then(() => {          resolve(this.extractData(this.employeesCollection));        });      } else {        this.wakanda.getCatalog().then(ds => {          ds['Employee'].query({pageSize: this.pageSize, select: 'manager'}).then(res => {            this.employeesCollection = res;            resolve(this.extractData(res));          }).catch((error) => {            reject(error.message);          });        });      }    });  }  private extractData(collection) {    let entities = collection['entities'];    let items = entities.map((obj) => {      let employee: any = {};      employee.ID = obj.ID;      employee.title = obj.title;      employee.fullName = obj.fullName;      employee.companyName = obj.companyName;      employee.managerName = (obj.manager)? obj.manager.fullName: "";      employee.photoURI = obj.photo.uri;      return employee;    });    return {      total: collection._count,      pageSize: collection._pageSize,      items: items    };  }}